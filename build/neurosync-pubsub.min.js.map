{"version":3,"sources":["neurosync-pubsub.js"],"names":["Neuro","live","get","url","cache","PubSub","LiveFactory","database","onPublish","handlePublish","message","forceOffline","publish","channel","pubsub","token","subscribe","debug","Debugs","PUBSUB_CREATED","onpublish"],"mappings":"AACAA,MAAAC,KAAA,WAIA,QAAAC,GAAAC,GAEA,MAAAA,KAAAC,GAAAA,EAAAD,GAAAC,EAAAD,GAAA,GAAAE,QAAAF,GAGA,QAAAG,GAAAC,EAAAC,GAYA,QAAAC,GAAAC,GAEAV,MAAAW,cAEAH,EAAAE,GAIA,QAAAE,GAAAF,GAEAV,MAAAW,cAEAE,EAAAD,QAAAF,GAtBA,IAAAH,EAAAO,SAAAP,EAAAM,UAAAN,EAAAQ,MAEA,MAAA,aAGA,IAAAD,GAAAZ,EAAAK,EAAAO,QACAD,EAAAC,EAAAE,UAAAT,EAAAM,QAAAN,EAAAQ,MAyBA,OAvBAf,OAAAiB,MAAAjB,MAAAkB,OAAAC,eAAAL,GAkBAD,EAAAO,UAAAX,EAEAG,EAAAE,OAAAA,EACAF,EAAAC,QAAAA,EAEAD,EAxCA,GAAAR,KA2CA,OAAAE","file":"neurosync-pubsub.min.js","sourcesContent":["\nNeuro.live = (function()\n{\n  var cache = {};\n\n  function get(url)\n  {\n    return url in cache ? cache[ url ] : ( cache[ url ] = new PubSub( url ) );\n  }\n\n  function LiveFactory(database, onPublish)\n  {\n    if ( !database.pubsub || !database.channel || !database.token )\n    {\n      return function() {};\n    }\n\n    var pubsub = get( database.pubsub );\n    var channel = pubsub.subscribe( database.channel, database.token );\n\n    Neuro.debug( Neuro.Debugs.PUBSUB_CREATED, pubsub );\n\n    function handlePublish(message)\n    {\n      if ( !Neuro.forceOffline )\n      {\n        onPublish( message );\n      }\n    }\n\n    function publish(message)\n    {\n      if ( !Neuro.forceOffline )\n      {\n        channel.publish( message );\n      }\n    };\n\n    channel.onpublish = handlePublish;\n\n    publish.pubsub = pubsub;\n    publish.channel = channel;\n\n    return publish;\n  };\n\n  return LiveFactory;\n\n})();"],"sourceRoot":"/source/"}