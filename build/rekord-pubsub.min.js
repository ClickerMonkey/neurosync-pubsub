/* rekord-pubsub 1.4.2 - A rekord binding to pubsub - implementing Rekord.live by Philip Diffenderfer */
!function(e,n){"function"==typeof define&&define.amd?define(["Rekord","PubSub"],function(o,u){return n(e,o,u)}):"object"==typeof module&&module.exports?module.exports=n(global,require("Rekord"),require("PubSub")):e.Rekord=n(e,e.Rekord,e.PubSub)}(this,function(e,n,o,u){function r(e){return e in b?b[e]:b[e]=new o(e)}function i(e){function o(o){n.forceOffline||(o.op===f&&e.liveSave(o.key,o.model),o.op===t&&e.liveRemove(o.key))}if(!e.pubsub||!e.channel||!e.token)return{save:n.noop,remove:n.noop};var u=r(e.pubsub),i=u.subscribe(e.channel,e.token);return n.debug(n.Debugs.PUBSUB_CREATED,u),i.onpublish=o,{channel:i,pubsub:u,save:function(e,o){n.forceOffline||i.publish({op:f,key:e.$key(),model:o})},remove:function(e){n.forceOffline||i.publish({op:t,key:e.$key()})}}}var f=1,t=2,b={};return n.setLive(i,!0),n});
//# sourceMappingURL=rekord-pubsub.min.js.map
